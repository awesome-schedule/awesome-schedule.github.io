{"version":3,"sources":["webpack:///./src/components/tabs/FuzzyView.vue?64d1","webpack:///./src/components/tabs/FuzzyView.ts","webpack:///./src/components/tabs/FuzzyView.ts?1d9f","webpack:///./src/components/tabs/FuzzyView.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","workerLoaded","on","$event","target","value","getClass","type","indexOf","_k","keyCode","key","closeClassList","staticStyle","_v","inputCourses","inputMatches","schedule","currentSchedule","display","showClasslistTitle","expandOnEntering","updateCourse","modal","showCourseModal","crs","match","disposeWorker","initWorker","staticRenderFns","loading","window","catalog","worker","noti","info","success","query","generated","switchSchedule","fuzzySearch","err","error","message","console","$refs","classSearch","section","remove","update","classList","enteringClassList","$forceUpdate","saveStatus","components","ClassList","component"],"mappings":"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","file":"js/chunk-2d224d50.12f6fc01.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('nav',{staticClass:\"bg-light sidebar\"},[_c('div',{staticClass:\"input-group mt-2\"},[_c('input',{ref:\"classSearch\",staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"placeholder\":\"Title/Topic/Prof./Desc.\",\"disabled\":!_vm.workerLoaded},on:{\"input\":function($event){$event.target.value || _vm.getClass('')},\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getClass($event.target.value)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.closeClassList()}}}),_c('div',{staticClass:\"input-group-append\"},[(_vm.loading)?_c('div',{staticClass:\"spinner-border my-auto text-primary mx-1\",staticStyle:{\"width\":\"1.4rem\",\"height\":\"1.4rem\"},attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])]):_c('span',{staticClass:\"input-group-text px-2 click-icon\"},[_c('i',{staticClass:\"fas fa-search\"})])])]),(_vm.inputCourses.length)?_c('div',{ref:\"classList\",staticClass:\"card card-body p-1\"},[_c('ClassList',{ref:\"enteringClassList\",attrs:{\"courses\":_vm.inputCourses,\"matches\":_vm.inputMatches,\"schedule\":_vm.schedule.currentSchedule,\"is-entering\":true,\"show-classlist-title\":_vm.display.showClasslistTitle,\"expand-on-entering\":_vm.display.expandOnEntering},on:{\"update_course\":_vm.updateCourse,\"course_modal\":function($event){return _vm.modal.showCourseModal($event.crs, $event.match)},\"close\":function($event){return _vm.closeClassList()}}})],1):_c('div',{staticClass:\"mx-3 my-4\"},[_vm._v(\"\\n        Fuzzy search (beta): Enter your search query and press ENTER to get results. Because\\n        fuzzy search is slow, we cannot provide real-time results. Please do not search for\\n        course number (e.g. 2102) here. It is not supported. This feature is memory intensive,\\n        which will cause some browsers to crash. Before enabling this feature, please make sure\\n        that your computer has at least 8GB RAM and you are using Chrome or FireFox.\\n\\n        \"),(!_vm.workerLoaded)?_c('button',{staticClass:\"btn btn-outline-info w-100 mt-2\",on:{\"click\":function($event){return _vm.initWorker()}}},[_vm._v(\"\\n            Enable\\n        \")]):_c('button',{staticClass:\"btn btn-outline-info w-100 mt-2\",attrs:{\"title\":\"Release worker and reclaim memory\"},on:{\"click\":function($event){return _vm.disposeWorker()}}},[_vm._v(\"\\n            Release\\n        \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @module components/tabs\n */\n\n/**\n *\n */\nimport { SearchMatch } from '@/models/Catalog';\nimport Course from '@/models/Course';\nimport Store from '@/store';\nimport { Component, Vue } from 'vue-property-decorator';\nimport ClassList from '../ClassList.vue';\n\n/**\n * component for performing fuzzy-search against the catalog of courses\n * @author Hanzhi Zhou\n * @noInheritDoc\n */\n@Component({\n    components: {\n        ClassList\n    }\n})\nexport default class FuzzyView extends Store {\n    inputCourses: Course[] = [];\n    inputMatches: SearchMatch[] = [];\n\n    /**\n     * represent the current state of the fuzzy search component.\n     * disable the input box if true\n     */\n    loading = false;\n\n    workerLoaded = !!window.catalog.worker;\n\n    /**\n     * initialize catalog's search worker if it is not yet initialized\n     */\n    async initWorker() {\n        if (!window.catalog.worker) {\n            this.loading = true;\n            this.noti.info('Gathering data for fuzzy search...');\n            await window.catalog.initWorker();\n            this.noti.success('Success!', 2.5);\n            this.loading = false;\n            this.workerLoaded = true;\n        }\n    }\n\n    disposeWorker() {\n        window.catalog.disposeWorker();\n        this.workerLoaded = false;\n    }\n\n    /**\n     * get classes that match the input query.\n     * clear search results on falsy parameter.\n     *\n     * if a generated schedule is displayed, switch to proposed schedule,\n     * because we're adding stuff to the proposed schedule\n     *\n     * @see Catalog.search\n     */\n    async getClass(query: string) {\n        if (!query) {\n            this.inputCourses = [];\n            this.inputMatches = [];\n            return;\n        }\n        this.loading = true;\n        if (this.schedule.generated) this.schedule.switchSchedule(false);\n        window.catalog.initWorker();\n\n        console.time('query');\n        try {\n            [this.inputCourses, this.inputMatches] = await window.catalog.fuzzySearch(query);\n        } catch (err) {\n            this.noti.error(err.message);\n            console.error(err);\n        } finally {\n            this.loading = false;\n            console.timeEnd('query');\n        }\n    }\n\n    closeClassList() {\n        (this.$refs.classSearch as HTMLInputElement).value = '';\n        this.getClass('');\n    }\n\n    /**\n     * @see Schedule.update\n     */\n    updateCourse(key: string, section: number, remove = false) {\n        this.schedule.currentSchedule.update(key, section, remove);\n\n        // note: adding a course to schedule.All cannot be detected by Vue.\n        // Must use forceUpdate to re-render component\n        const classList = this.$refs.enteringClassList;\n        if (classList instanceof Vue) (classList as Vue).$forceUpdate();\n        this.saveStatus();\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/eslint-loader/index.js??ref--13-0!./FuzzyView.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/eslint-loader/index.js??ref--13-0!./FuzzyView.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FuzzyView.vue?vue&type=template&id=418037dc&\"\nimport script from \"./FuzzyView.ts?vue&type=script&lang=ts&\"\nexport * from \"./FuzzyView.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}