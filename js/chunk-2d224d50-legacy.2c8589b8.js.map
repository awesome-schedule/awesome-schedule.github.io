{"version":3,"sources":["webpack:///./src/components/tabs/FuzzyView.vue?d2eb","webpack:///./src/components/tabs/FuzzyView.ts","webpack:///./src/components/tabs/FuzzyView.ts?1d9f","webpack:///./src/components/tabs/FuzzyView.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","ref","attrs","workerLoaded","on","$event","onInput","target","value","type","indexOf","_k","keyCode","key","getClass","closeClassList","staticStyle","_v","inputCourses","inputMatches","schedule","currentSchedule","display","showClasslistTitle","expandOnEntering","updateCourse","modal","showCourseModal","crs","match","directives","name","rawName","expression","domProps","Array","isArray","realtime","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","staticRenderFns","loading","window","catalog","worker","noti","info","initWorker","success","disposeWorker","query","generated","switchSchedule","fuzzySearch","error","message","console","$refs","classSearch","section","group","remove","update","classList","enteringClassList","$forceUpdate","saveStatus","components","ClassList","component"],"mappings":"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","file":"js/chunk-2d224d50-legacy.2c8589b8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('nav',{staticClass:\"bg-light sidebar\"},[_vm._m(0),_c('div',{staticClass:\"input-group mt-2\"},[(_vm.realtime)?_c('input',{ref:\"classSearch\",staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"placeholder\":\"Title/Topic/Prof./Desc.\",\"disabled\":!_vm.workerLoaded},on:{\"input\":function($event){return _vm.onInput($event.target.value)},\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getClass($event.target.value)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.closeClassList()}}}):_c('input',{ref:\"classSearch\",staticClass:\"form-control form-control-sm\",attrs:{\"type\":\"text\",\"placeholder\":\"Title/Topic/Prof./Desc.\",\"disabled\":!_vm.workerLoaded},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.getClass($event.target.value)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.closeClassList()}}}),_c('div',{staticClass:\"input-group-append\"},[(_vm.loading)?_c('div',{staticClass:\"spinner-border my-auto text-primary mx-1\",staticStyle:{\"width\":\"1.4rem\",\"height\":\"1.4rem\"},attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])]):_c('span',{staticClass:\"input-group-text px-2 click-icon\"},[_c('i',{staticClass:\"fas fa-search\"})])])]),(_vm.inputCourses.length)?_c('div',{ref:\"classList\",staticClass:\"card card-body p-1\"},[_c('ClassList',{ref:\"enteringClassList\",attrs:{\"courses\":_vm.inputCourses,\"matches\":_vm.inputMatches,\"schedule\":_vm.schedule.currentSchedule,\"is-entering\":true,\"show-classlist-title\":_vm.display.showClasslistTitle,\"expand-on-entering\":_vm.display.expandOnEntering},on:{\"update_course\":_vm.updateCourse,\"course_modal\":function($event){return _vm.modal.showCourseModal($event.crs, $event.match)},\"close\":function($event){return _vm.closeClassList()}}})],1):_c('div',{staticClass:\"mx-3 my-2\"},[_c('div',{staticClass:\"form-group row no-gutters mt-0 mb-1 mx-2\"},[_vm._m(1),_c('div',[_c('div',{staticClass:\"custom-control custom-checkbox ml-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.realtime),expression:\"realtime\"}],staticClass:\"custom-control-input\",attrs:{\"id\":\"realtime\",\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.realtime)?_vm._i(_vm.realtime,null)>-1:(_vm.realtime)},on:{\"change\":function($event){var $$a=_vm.realtime,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.realtime=$$a.concat([$$v]))}else{$$i>-1&&(_vm.realtime=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.realtime=$$c}}}}),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":\"realtime\"}})])])]),_vm._m(2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-info nav-btn\"},[_vm._v(\" Fuzzy Search \"),_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"Beta\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('label',{staticClass:\"m-0\",attrs:{\"for\":\"realtime\"}},[_c('small',[_vm._v(\"Real Time\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ol',{staticClass:\"pl-2\"},[_c('li',{staticClass:\"mb-2 pl-1\"},[_vm._v(\" You should use fuzzy search only when you want do an \"),_c('b',[_vm._v(\"approximate\")]),_vm._v(\" match to your query. If you know exactly what your target course's course number/title/etc., please use the ordinary search instead. \")]),_c('li',{staticClass:\"mb-2 pl-1\"},[_vm._v(\" Searching for course numbers (e.g. CS 2102) is not supported. \")])])}]\n\nexport { render, staticRenderFns }","/**\n * @module components/tabs\n */\n\n/**\n *\n */\nimport { SearchMatch } from '@/models/Catalog';\nimport Course from '@/models/Course';\nimport Store from '@/store';\nimport { Component, Vue } from 'vue-property-decorator';\nimport ClassList from '../ClassList.vue';\n\n/**\n * component for performing fuzzy-search against the catalog of courses\n * @author Hanzhi Zhou\n * @noInheritDoc\n */\n@Component({\n    components: {\n        ClassList\n    }\n})\nexport default class FuzzyView extends Store {\n    inputCourses: Course[] = [];\n    inputMatches: SearchMatch[] = [];\n\n    /**\n     * represent the current state of the fuzzy search component.\n     * disable the input box if true\n     */\n    loading = false;\n\n    workerLoaded = !!window.catalog.worker;\n\n    realtime = true;\n\n    /**\n     * initialize catalog's search worker if it is not yet initialized\n     */\n    async initWorker() {\n        if (!window.catalog.worker) {\n            this.loading = true;\n            this.noti.info('Gathering data for fuzzy search...');\n            await window.catalog.initWorker();\n            this.noti.success('Success!', 2.5);\n            this.loading = false;\n            this.workerLoaded = true;\n        }\n    }\n\n    mounted() {\n        if (!this.workerLoaded) this.initWorker();\n    }\n\n    destroyed() {\n        if (this.workerLoaded) this.disposeWorker();\n    }\n\n    onInput(query: string) {\n        if (this.realtime) this.getClass(query);\n        else if (!query) this.getClass('');\n    }\n\n    disposeWorker() {\n        window.catalog.disposeWorker();\n        this.workerLoaded = false;\n    }\n\n    /**\n     * get classes that match the input query.\n     * clear search results on falsy parameter.\n     *\n     * if a generated schedule is displayed, switch to proposed schedule,\n     * because we're adding stuff to the proposed schedule\n     *\n     * @see Catalog.search\n     */\n    async getClass(query: string) {\n        if (!query) {\n            this.inputCourses = [];\n            this.inputMatches = [];\n            return;\n        }\n        this.loading = true;\n        if (this.schedule.generated) this.schedule.switchSchedule(false);\n        window.catalog.initWorker();\n\n        console.time('query');\n        try {\n            [this.inputCourses, this.inputMatches] = await window.catalog.fuzzySearch(query);\n        } catch (err) {\n            this.noti.error(err.message);\n            console.error(err);\n        } finally {\n            this.loading = false;\n            console.timeEnd('query');\n        }\n    }\n\n    closeClassList() {\n        (this.$refs.classSearch as HTMLInputElement).value = '';\n        this.getClass('');\n    }\n\n    /**\n     * @see Schedule.update\n     */\n    updateCourse(key: string, section: number, group = 0, remove = false) {\n        this.schedule.currentSchedule.update(key, section, group, remove);\n\n        // note: adding a course to schedule.All cannot be detected by Vue.\n        // Must use forceUpdate to re-render component\n        const classList = this.$refs.enteringClassList;\n        if (classList instanceof Vue) (classList as Vue).$forceUpdate();\n        this.saveStatus();\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/eslint-loader/index.js??ref--13-0!./FuzzyView.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/eslint-loader/index.js??ref--13-0!./FuzzyView.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FuzzyView.vue?vue&type=template&id=2268967e&\"\nimport script from \"./FuzzyView.ts?vue&type=script&lang=ts&\"\nexport * from \"./FuzzyView.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}